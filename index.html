<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Course Information – Local Golf Database</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --green: #244f3c;
      --green-dark: #163023;
      --gold: #d1a14b;
      --cream: #f5f0e6;
      --bg: #fcfaf6;
      --text: #222;
      --radius: 14px;
      --shadow: 0 8px 20px rgba(0,0,0,0.08);
      --muted: #6b7280;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #fdf7eb 0, #f3efe7 40%, #e7e1d3 100%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      padding: 12px 16px;
      background: linear-gradient(120deg, var(--green-dark), var(--green));
      color: #fefcf5;
      box-shadow: 0 4px 16px rgba(0,0,0,0.25);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    header h1 {
      margin: 0;
      font-size: 1.3rem;
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    header p {
      margin: 2px 0 0;
      font-size: 0.85rem;
      opacity: 0.9;
    }

    main {
      flex: 1;
      width: 100%;
      margin: 0;
      display: grid;
      grid-template-columns: 260px minmax(0, 1fr);
      gap: 8px;
      padding: 8px 10px;
    }

    @media (max-width: 900px) {
      main {
        grid-template-columns: 1fr;
      }
    }

    .panel {
      background: rgba(252, 249, 242, 0.97);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid rgba(0,0,0,0.04);
      padding: 10px 12px;
      backdrop-filter: blur(6px);
    }

    .panel h2 {
      margin: 0 0 6px;
      font-size: 0.95rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--green-dark);
    }

    .panel small {
      color: var(--muted);
      font-size: 0.78rem;
    }

    /* ===== COURSE LIST ===== */
    #coursesList {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 8px;
    }

    .course-pill {
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.08);
      background: #fdfaf3;
      display: flex;
      flex-direction: column;
      cursor: pointer;
      transition: transform 0.12s ease, box-shadow 0.12s ease, border-color 0.12s ease, background 0.12s ease;
      font-size: 0.85rem;
    }

    .course-pill:hover {
      transform: translateY(-1px);
      box-shadow: 0 3px 10px rgba(0,0,0,0.08);
      background: #fffaf0;
    }

    .course-pill.active {
      background: #183c2c;
      color: #fdf7eb;
      border-color: rgba(255,255,255,0.4);
    }

    .course-pill-title {
      font-weight: 600;
    }

    .course-pill-meta {
      font-size: 0.75rem;
      opacity: 0.85;
    }

    .muted {
      color: var(--muted);
      font-size: 0.85rem;
    }

    .error {
      color: #b91c1c;
      font-size: 0.85rem;
      margin-top: 6px;
    }

    /* ===== COURSE HEADER / BADGES ===== */
    .course-header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 6px;
      border-bottom: 1px solid rgba(0,0,0,0.12);
      padding-bottom: 6px;
    }

    .course-header-main h3 {
      margin: 0;
      font-size: 1rem;
    }

    .course-header-main p {
      margin: 2px 0 0;
      font-size: 0.8rem;
      color: var(--muted);
    }

    .course-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .badge {
      padding: 3px 7px;
      border-radius: 999px;
      font-size: 0.7rem;
      border: 1px solid rgba(0,0,0,0.06);
      background: #f6f1e6;
      color: var(--green-dark);
      white-space: nowrap;
    }

    .badge-pill {
      background: #183c2c;
      color: #fefcf5;
      border-color: transparent;
    }

    .detail-section-title {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
      margin: 8px 0 4px;
    }

    /* ===== TEES LEGEND ===== */
    #teesInfo {
      margin: 2px 0 8px;
      font-size: 0.8rem;
      color: var(--muted);
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      padding: 6px 8px;
      border-radius: 999px;
      background: rgba(0,0,0,0.03);
    }

    #teesInfo span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 7px;
      border-radius: 999px;
      background: rgba(255,255,255,0.95);
      white-space: nowrap;
    }

    .tee-dot {
      width: 9px;
      height: 9px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.15);
      background: #e5e7eb;
      flex-shrink: 0;
    }

    /* ===== SCORECARD TABLE ===== */
    .scorecard-wrapper {
      max-width: 100%;
      overflow-x: auto;
      border-radius: 10px;
      border: 1px solid rgba(0,0,0,0.08);
      background: #fffdf6;
      margin-top: 4px;
    }

    table.scorecard {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.75rem;
      table-layout: fixed;
    }

    .scorecard thead {
      background: #efe4d0;
    }

    .scorecard th,
    .scorecard td {
      padding: 4px 3px;
      text-align: center;
      border-bottom: 1px solid rgba(0,0,0,0.06);
      border-right: 1px solid rgba(0,0,0,0.06);
      white-space: nowrap;
    }

    .scorecard th:first-child,
    .scorecard td:first-child {
      text-align: left;
      font-weight: 600;
      background: #f4ead7;
      position: sticky;
      left: 0;
      z-index: 1;
    }

    .scorecard tr:nth-child(even) td {
      background: rgba(0,0,0,0.01);
    }

    .scorecard tfoot td {
      font-weight: 600;
      background: #e8ddca;
    }

    .scorecard th.total-col,
    .scorecard td.total-col {
      background: #f0e5cf;
      font-weight: 600;
    }

    .scorecard th.out-in-col,
    .scorecard td.out-in-col {
      background: #f2e7d2;
      font-weight: 600;
    }

    .tee-name-cell {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .tee-name-swatch {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.15);
      flex-shrink: 0;
    }

    /* SCORE INPUTS */
    .scorecard input.score-input {
      width: 2.4ch;
      max-width: 28px;
      padding: 2px;
      border-radius: 4px;
      border: 1px solid rgba(0,0,0,0.2);
      font-size: 0.7rem;
      text-align: center;
      background: #fffef8;
    }

    .score-row th {
      background: #e9deca;
    }

    .score-row td {
      background: #fdf7ea;
    }

    /* ===== MEDIA / VIRTUAL CADDY ===== */
    .media-stack {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .media-card {
      border-radius: 10px;
      border: 1px solid rgba(0,0,0,0.08);
      background: #fffdf6;
      padding: 8px 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.04);
    }

    .media-card h3 {
      margin: 0 0 4px;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--green-dark);
    }

    .media-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
      font-size: 0.75rem;
      flex-wrap: wrap;
    }

    .media-controls label {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .media-controls select {
      padding: 3px 6px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.2);
      background: #fcfaf2;
      font-size: 0.75rem;
    }

    .media-body {
      font-size: 0.78rem;
      color: var(--muted);
      min-height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 4px;
    }

    .media-body img {
      max-width: 100%;
      max-height: 220px;
      border-radius: 8px;
      display: block;
      object-fit: cover;
    }

    .media-body video {
      max-width: 100%;
      max-height: 220px;
      border-radius: 8px;
      display: block;
      background: #000;
    }

    .media-note {
      font-size: 0.72rem;
      color: var(--muted);
      margin-top: 3px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Local Course Information</h1>
    <p>A lightweight yardage book. Data lives in /data; this page just reads it.</p>
  </header>

  <main>
    <!-- LEFT: COURSE LIST -->
    <section class="panel">
      <h2>Courses</h2>
      <small>Select a course to view its yardages, pars, and media.</small>
      <div id="coursesList"></div>
      <div id="coursesError" class="error" style="display:none;"></div>
    </section>

    <!-- RIGHT: SCORECARD + MEDIA -->
    <section class="panel">
      <h2>Course Detail</h2>
      <div id="courseDetail">
        <p class="muted">Choose a course on the left to see its scorecard and virtual caddy panel.</p>
      </div>
    </section>
  </main>

  <script>
    var COURSES_INDEX_PATH = "data/courses.json";

    function fetchJSON(path) {
      return fetch(path).then(function(res) {
        if (!res.ok) {
          throw new Error("HTTP " + res.status + " for " + path);
        }
        return res.json();
      });
    }

    function loadCourses() {
      var listEl = document.getElementById("coursesList");
      var errorEl = document.getElementById("coursesError");
      listEl.innerHTML = "<p class='muted'>Loading courses…</p>";
      errorEl.style.display = "none";

      fetchJSON(COURSES_INDEX_PATH)
        .then(function(courses) {
          if (!Array.isArray(courses) || courses.length === 0) {
            listEl.innerHTML = "<p class='muted'>No courses found in data/courses.json.</p>";
            return;
          }
          renderCourseList(courses);
          var first = courses[0];
          if (first) {
            setActiveCoursePill(first.id);
            loadCourse(first.id);
          }
        })
        .catch(function(err) {
          console.error("[courses] Failed to load", err);
          listEl.innerHTML = "";
          errorEl.textContent = "Could not load " + COURSES_INDEX_PATH + " – " + err.message;
          errorEl.style.display = "block";
        });
    }

    function renderCourseList(courses) {
      var listEl = document.getElementById("coursesList");
      listEl.innerHTML = "";

      courses.forEach(function(course) {
        var pill = document.createElement("button");
        pill.type = "button";
        pill.className = "course-pill";
        pill.dataset.courseId = course.id;

        var title = document.createElement("span");
        title.className = "course-pill-title";
        title.textContent = course.name || "Unnamed Course";

        var meta = document.createElement("span");
        meta.className = "course-pill-meta";

        var city = course.city || "";
        var state = course.state || "";
        var holes = course.holes;

        var metaText = city;
        if (city && state) {
          metaText += ", " + state;
        } else if (state) {
          metaText = state;
        }
        if (holes) {
          if (metaText) metaText += " · ";
          metaText += holes + " holes";
        }
        meta.textContent = metaText;

        pill.appendChild(title);
        pill.appendChild(meta);

        pill.addEventListener("click", function() {
          setActiveCoursePill(course.id);
          loadCourse(course.id);
        });

        listEl.appendChild(pill);
      });
    }

    function setActiveCoursePill(courseId) {
      var pills = document.querySelectorAll(".course-pill");
      pills.forEach(function(pill) {
        pill.classList.toggle("active", pill.dataset.courseId === courseId);
      });
    }

    function loadCourse(courseId) {
      var container = document.getElementById("courseDetail");
      container.innerHTML = "<p class='muted'>Loading course data…</p>";

      var basePath = "data/courses/" + courseId;
      var coursePath = basePath + "/course.json";
      var holesPath = basePath + "/holes.json";

      Promise.all([
        fetchJSON(coursePath),
        fetchJSON(holesPath)
      ])
      .then(function(results) {
        var course = results[0];
        var holes = results[1];
        renderCourseDetail(course, holes);
      })
      .catch(function(err) {
        console.error("[course] Failed to load", courseId, err);
        container.innerHTML =
          "<p class='error'>Could not load <code>" +
          courseId +
          "</code> data. Check that <code>" +
          coursePath +
          "</code> and <code>" +
          holesPath +
          "</code> exist and are valid JSON.</p>";
      });
    }

    function renderCourseDetail(course, holes) {
      var container = document.getElementById("courseDetail");
      if (!course) {
        container.innerHTML = "<p class='error'>No course JSON loaded.</p>";
        return;
      }

      var tees = Array.isArray(course.tees) ? course.tees : [];
      var hasHoles = Array.isArray(holes) && holes.length > 0;

      var loc = course.location || {};
      var locLine = "";
      if (loc.city) locLine += loc.city;
      if (loc.city && loc.state) locLine += ", ";
      if (loc.state) locLine += loc.state;
      if (course.holes) {
        if (locLine) locLine += " · ";
        locLine += course.holes + " holes";
      }

      var notesBadge = course.notes
        ? "<span class='badge'>" + course.notes + "</span>"
        : "";

      var teesInfo = "";
      if (tees.length) {
        tees.forEach(function(t) {
          var color = t.color || "#e5e7eb";
          var name = t.name || t.id;
          teesInfo +=
            "<span>" +
              "<span class='tee-dot' style='background:" + color + ";'></span>" +
              name +
              (t.totalYardage ? " · " + t.totalYardage + " yds" : "") +
            "</span>";
        });
      } else {
        teesInfo = "<span>No tees defined yet in <code>course.json</code>.</span>";
      }

      if (!hasHoles) {
        container.innerHTML =
          "<div class='course-header'>" +
            "<div class='course-header-main'>" +
              "<h3>" + (course.name || "Unnamed Course") + "</h3>" +
              "<p>" + (locLine || "") + "</p>" +
            "</div>" +
            "<div class='course-badges'>" +
              "<span class='badge badge-pill'>Local DB</span>" +
              notesBadge +
            "</div>" +
          "</div>" +
          "<div class='detail-section-title'>Tees</div>" +
          "<div id='teesInfo'>" + teesInfo + "</div>" +
          "<p class='muted'>No holes.json data yet – once you start filling in hole info, the scorecard and media panel will appear.</p>";
        return;
      }

      // ===== BUILD SCORECARD DATA =====
      var maxHole = 0;
      holes.forEach(function(h, idx) {
        var num = h.hole || (idx + 1);
        if (num > maxHole) maxHole = num;
      });

      var frontEnd = Math.min(9, maxHole);
      var backStart = frontEnd + 1;
      var hasBack = maxHole > frontEnd;

      var parByHole = {};
      var hdcpByHole = {};
      var yardagesByTeeHole = {};
      var mediaByHole = {};
      var parFront = 0;
      var parBack = 0;
      var parTotal = 0;
      var teeTotals = {};

      holes.forEach(function(h, idx) {
        var holeNum = h.hole || (idx + 1);
        parByHole[holeNum] = h.par;
        hdcpByHole[holeNum] = h.handicap;

        if (typeof h.par === "number") {
          if (holeNum <= frontEnd) parFront += h.par;
          else parBack += h.par;
          parTotal += h.par;
        }

        if (h.yardages && typeof h.yardages === "object") {
          tees.forEach(function(t) {
            var teeId = t.id;
            var y = h.yardages[teeId];
            if (typeof y === "number") {
              if (!yardagesByTeeHole[teeId]) yardagesByTeeHole[teeId] = {};
              yardagesByTeeHole[teeId][holeNum] = y;

              if (!teeTotals[teeId]) {
                teeTotals[teeId] = { front: 0, back: 0, total: 0 };
              }
              if (holeNum <= frontEnd) teeTotals[teeId].front += y;
              else teeTotals[teeId].back += y;
              teeTotals[teeId].total += y;
            }
          });
        }

        var m = h.media || {};
        var imgPath = m.imageTee || m.image || m.imageGreen || null;
        var flyPath = m.flyover || null;
        mediaByHole[holeNum] = {
          image: imgPath,
          flyover: flyPath
        };
      });

      // ===== BUILD SCORECARD TABLE =====
      var table = "";
      var h, hb, ph, phb;

      table += "<thead>";
      table += "<tr>";
      table += "<th></th>";

      for (h = 1; h <= frontEnd; h++) {
        table += "<th>" + h + "</th>";
      }

      if (hasBack) {
        table += "<th class='out-in-col'>OUT</th>";
      }

      if (hasBack) {
        for (hb = backStart; hb <= maxHole; hb++) {
          table += "<th>" + hb + "</th>";
        }
        table += "<th class='out-in-col'>IN</th>";
      }

      table += "<th class='total-col'>TOTAL</th>";
      table += "</tr>";
      table += "</thead>";

      table += "<tbody>";

      // Par row
      table += "<tr>";
      table += "<th>Par</th>";

      var parFrontOut = 0;
      var parBackIn = 0;

      for (h = 1; h <= frontEnd; h++) {
        ph = parByHole[h];
        if (typeof ph === "number") parFrontOut += ph;
        table += "<td>" + (typeof ph === "number" ? ph : "–") + "</td>";
      }

      if (hasBack) {
        table += "<td class='out-in-col'>" + (parFrontOut || "–") + "</td>";
      }

      if (hasBack) {
        for (hb = backStart; hb <= maxHole; hb++) {
          phb = parByHole[hb];
          if (typeof phb === "number") parBackIn += phb;
          table += "<td>" + (typeof phb === "number" ? phb : "–") + "</td>";
        }
        table += "<td class='out-in-col'>" + (parBackIn || "–") + "</td>";
      }

      table += "<td class='total-col'>" + (parTotal || "–") + "</td>";
      table += "</tr>";

      // Handicap row
      table += "<tr>";
      table += "<th>Hdcp</th>";
      var hd, hdb;

      for (h = 1; h <= frontEnd; h++) {
        hd = hdcpByHole[h];
        table += "<td>" + ((hd === 0 || hd) ? hd : "–") + "</td>";
      }

      if (hasBack) {
        table += "<td class='out-in-col'></td>";
      }

      if (hasBack) {
        for (hb = backStart; hb <= maxHole; hb++) {
          hdb = hdcpByHole[hb];
          table += "<td>" + ((hdb === 0 || hdb) ? hdb : "–") + "</td>";
        }
        table += "<td class='out-in-col'></td>";
      }

      table += "<td class='total-col'></td>";
      table += "</tr>";

      // Tees rows
      tees.forEach(function(t) {
        var teeId = t.id;
        var teeName = t.name || teeId;
        var teeColor = t.color || "#e5e7eb";
        var totals = teeTotals[teeId] || { front: 0, back: 0, total: 0 };

        table += "<tr>";
        table += "<th><span class='tee-name-cell'><span class='tee-name-swatch' style='background:" +
          teeColor +
          ";'></span><span>" +
          teeName +
          "</span></span></th>";

        for (h = 1; h <= frontEnd; h++) {
          var yh = yardagesByTeeHole[teeId] && yardagesByTeeHole[teeId][h];
          table += "<td>" + (typeof yh === "number" ? yh : "–") + "</td>";
        }

        if (hasBack) {
          table += "<td class='out-in-col'>" + (totals.front || "–") + "</td>";
        }

        if (hasBack) {
          for (hb = backStart; hb <= maxHole; hb++) {
            var yhb = yardagesByTeeHole[teeId] && yardagesByTeeHole[teeId][hb];
            table += "<td>" + (typeof yhb === "number" ? yhb : "–") + "</td>";
          }
          table += "<td class='out-in-col'>" + (totals.back || "–") + "</td>";
        }

        table += "<td class='total-col'>" + (totals.total || "–") + "</td>";
        table += "</tr>";
      });

      // Score row
      table += "<tr class='score-row'>";
      table += "<th>Score</th>";

      for (h = 1; h <= frontEnd; h++) {
        table += "<td><input type='number' min='1' max='20' class='score-input' data-hole='" + h + "' /></td>";
      }

      if (hasBack) {
        table += "<td class='out-in-col score-out'></td>";
      }

      if (hasBack) {
        for (hb = backStart; hb <= maxHole; hb++) {
          table += "<td><input type='number' min='1' max='20' class='score-input' data-hole='" + hb + "' /></td>";
        }
        table += "<td class='out-in-col score-in'></td>";
      }

      table += "<td class='total-col score-total'></td>";
      table += "</tr>";

      table += "</tbody>";

      // Footer labels
      table += "<tfoot>";
      table += "<tr>";
      table += "<td></td>";
      for (h = 1; h <= frontEnd; h++) {
        table += "<td></td>";
      }
      if (hasBack) {
        table += "<td class='out-in-col'>Front 9</td>";
        for (hb = backStart; hb <= maxHole; hb++) {
          table += "<td></td>";
        }
        table += "<td class='out-in-col'>Back 9</td>";
      }
      table += "<td class='total-col'>Round</td>";
      table += "</tr>";
      table += "</tfoot>";

      // Build main UI
      container.innerHTML =
        "<div class='course-header'>" +
          "<div class='course-header-main'>" +
            "<h3>" + (course.name || "Unnamed Course") + "</h3>" +
            "<p>" + (locLine || "") + "</p>" +
          "</div>" +
          "<div class='course-badges'>" +
            "<span class='badge badge-pill'>Local DB</span>" +
            notesBadge +
          "</div>" +
        "</div>" +
        "<div class='detail-section-title'>Tees</div>" +
        "<div id='teesInfo'>" + teesInfo + "</div>" +
        "<div class='detail-section-title'>Scorecard</div>" +
        "<div class='scorecard-wrapper'>" +
          "<table class='scorecard'>" +
            table +
          "</table>" +
        "</div>" +
        "<div class='detail-section-title'>Virtual Caddy</div>" +
        "<div class='media-stack'>" +
          "<div class='media-card'>" +
            "<div class='media-controls'>" +
              "<label>Hole " +
                "<select id='mediaHoleSelect'></select>" +
              "</label>" +
              "<span class='muted' style='font-size:0.7rem;'>Images and flyovers come from holes.json</span>" +
            "</div>" +
            "<h3>Hole Image</h3>" +
            "<div id='mediaImageArea' class='media-body'>No image set for this hole yet.</div>" +
          "</div>" +
          "<div class='media-card'>" +
            "<h3>Flyover</h3>" +
            "<div id='mediaFlyoverArea' class='media-body'>No flyover set for this hole yet.</div>" +
            "<div class='media-note'>When you add a flyover file or link in <code>media.flyover</code>, it will appear here.</div>" +
          "</div>" +
        "</div>";

      // ===== SCORE INPUT TOTALS =====
      var scoreInputs = container.querySelectorAll(".score-input");
      var outCell = container.querySelector(".score-out");
      var inCell = container.querySelector(".score-in");
      var totalCell = container.querySelector(".score-total");

      function recalcScores() {
        var outSum = 0;
        var inSum = 0;
        var total = 0;

        scoreInputs.forEach(function(input) {
          var v = parseInt(input.value, 10);
          if (isNaN(v)) return;
          var hole = parseInt(input.getAttribute("data-hole"), 10);
          if (hole <= frontEnd) {
            outSum += v;
          } else {
            inSum += v;
          }
          total += v;
        });

        if (outCell) outCell.textContent = outSum || "";
        if (inCell) inCell.textContent = inSum || "";
        if (totalCell) totalCell.textContent = total || "";
      }

      scoreInputs.forEach(function(input) {
        input.addEventListener("input", recalcScores);
      });

      // ===== VIRTUAL CADDY SELECTOR =====
      var holeSelect = container.querySelector("#mediaHoleSelect");
      if (holeSelect) {
        for (h = 1; h <= maxHole; h++) {
          var opt = document.createElement("option");
          opt.value = String(h);
          opt.textContent = String(h);
          holeSelect.appendChild(opt);
        }

        function updateMediaUI(holeStr) {
          var holeNum = parseInt(holeStr, 10);
          if (!holeNum) holeNum = 1;
          var data = mediaByHole[holeNum] || {};
          var imgArea = container.querySelector("#mediaImageArea");
          var flyArea = container.querySelector("#mediaFlyoverArea");

          if (imgArea) {
            if (data.image) {
              imgArea.innerHTML =
                "<img src='" + data.image + "' alt='Hole " + holeNum + " image' />";
            } else {
              imgArea.innerHTML = "No image set for hole " + holeNum + " yet.";
            }
          }

          if (flyArea) {
            if (data.flyover) {
              var lower = data.flyover.toLowerCase();
              if (
                lower.indexOf(".mp4") !== -1 ||
                lower.indexOf(".webm") !== -1 ||
                lower.indexOf(".mov") !== -1
              ) {
                flyArea.innerHTML =
                  "<video controls src='" + data.flyover + "'></video>";
              } else {
                flyArea.innerHTML =
                  "<a href='" + data.flyover + "' target='_blank' rel='noopener'>Open flyover for hole " + holeNum + "</a>";
              }
            } else {
              flyArea.innerHTML = "No flyover set for hole " + holeNum + " yet.";
            }
          }
        }

        holeSelect.addEventListener("change", function() {
          updateMediaUI(holeSelect.value);
        });

        updateMediaUI(holeSelect.value || "1");
      }
    }

    loadCourses();
  </script>
</body>
</html>
